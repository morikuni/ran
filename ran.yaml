env:
  GO111MODULE: on

vars:
  test: &test go test -v ./...

commands:
  test:
    description: Run test
    tasks:
    - cmd: *test

  install:
    description: Install command into your $GOBIN dir.
    tasks:
    - name: test
      cmd: *test

    - cmd: go install github.com/morikuni/ran/cmd/ran
      when:
      - test.succeeded
